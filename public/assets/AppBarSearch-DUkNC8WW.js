import{a0 as I,$ as C,as as $,r as b,b0 as T,ac as U,w as D,ad as K,n as E,b as l,af as z,be as N,az as O,bz as q,a as H,f as M,o as A,e as c,bA as B,aO as W,l as f,d as m,X as _,G as S,c as j,F as X,h as G,x as V,q as Q,t as L,H as k}from"./index-7cdlBwO-.js";import{C as J}from"./vue3-perfect-scrollbar-CCE4mazk.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Z}from"./VCard-D_EpkngW.js";import{V as P}from"./VCardText-xlQLV_iu.js";import{d as ee}from"./VTextField-DRsKWVm6.js";import{V as te}from"./VDivider-bLjKWtbJ.js";import{V as ae,a as se}from"./VList-D_jL3i86.js";import{u as oe,V as R,m as le,b as ne}from"./VOverlay-4BFCwqBn.js";import{f as re}from"./forwardRefs-B931MWyl.js";import"./VAvatar-Bnjdxls_.js";import"./VImg-yJ5NvBYn.js";const ie=C({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...le({origin:"center center",scrollStrategy:"block",transition:{component:ne},zIndex:2400})},"VDialog"),ce=I()({name:"VDialog",props:ie(),emits:{"update:modelValue":t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,x){let{emit:u,slots:p}=x;const v=$(t,"modelValue"),{scopeId:w}=oe(),o=b();function g(r){var a,i;const d=r.relatedTarget,e=r.target;if(d!==e&&((a=o.value)!=null&&a.contentEl)&&((i=o.value)!=null&&i.globalTop)&&![document,o.value.contentEl].includes(e)&&!o.value.contentEl.contains(e)){const s=z(o.value.contentEl);if(!s.length)return;const y=s[0],F=s[s.length-1];d===y?F.focus():y.focus()}}T(()=>{document.removeEventListener("focusin",g)}),U&&D(()=>v.value&&t.retainFocus,r=>{r?document.addEventListener("focusin",g):document.removeEventListener("focusin",g)},{immediate:!0});function n(){var r;u("afterEnter"),(t.scrim||t.retainFocus)&&((r=o.value)!=null&&r.contentEl)&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function h(){u("afterLeave")}return D(v,async r=>{var d;r||(await N(),(d=o.value.activatorEl)==null||d.focus({preventScroll:!0}))}),K(()=>{const r=R.filterProps(t),d=E({"aria-haspopup":"dialog"},t.activatorProps),e=E({tabindex:-1},t.contentProps);return l(R,E({ref:o,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},r,{modelValue:v.value,"onUpdate:modelValue":a=>v.value=a,"aria-modal":"true",activatorProps:d,contentProps:e,height:t.fullscreen?void 0:t.height,width:t.fullscreen?void 0:t.width,maxHeight:t.fullscreen?void 0:t.maxHeight,maxWidth:t.fullscreen?void 0:t.maxWidth,role:"dialog",onAfterEnter:n,onAfterLeave:h},w),{activator:p.activator,default:function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return l(O,{root:"VDialog"},{default:()=>{var y;return[(y=p.default)==null?void 0:y.call(p,...i)]}})}})}),re({},o)}}),ue={class:"d-flex align-center text-high-emphasis me-1"},de={class:"d-flex align-start"},fe={class:"h-100"},me={class:"h-100"},pe={class:"app-bar-search-suggestions d-flex flex-column align-center justify-center text-high-emphasis pa-12"},ve={class:"d-flex align-center flex-wrap justify-center gap-2 text-h5 my-3"},he={__name:"AppBarSearch",props:{isDialogVisible:{type:Boolean,required:!0},searchResults:{type:Array,required:!0}},emits:["update:isDialogVisible","search"],setup(t,{emit:x}){const u=t,p=x,{ctrl_k:v,meta_k:w}=q({passive:!1,onEventFired(e){e.ctrlKey&&e.key==="k"&&e.type==="keydown"&&e.preventDefault()}}),o=b(),g=b(),n=b("");D([v,w],()=>{p("update:isDialogVisible",!0)});const h=()=>{n.value="",p("update:isDialogVisible",!1)},r=e=>{var a,i;e.key==="ArrowDown"?(e.preventDefault(),(a=o.value)==null||a.focus("next")):e.key==="ArrowUp"&&(e.preventDefault(),(i=o.value)==null||i.focus("prev"))},d=e=>{n.value="",p("update:isDialogVisible",e)};return D(()=>u.isDialogVisible,()=>{n.value=""}),(e,a)=>{const i=H("IconBtn");return A(),M(ce,{"max-width":"600","model-value":u.isDialogVisible,height:e.$vuetify.display.smAndUp?"537":"100%",fullscreen:e.$vuetify.display.width<600,class:"app-bar-search-dialog","onUpdate:modelValue":d,onKeyup:B(h,["esc"])},{default:c(()=>[l(Z,{height:"100%",width:"100%",class:"position-relative"},{default:c(()=>[l(P,{class:"py-3 px-4"},{default:c(()=>[l(ee,{ref_key:"refSearchInput",ref:g,modelValue:f(n),"onUpdate:modelValue":[a[0]||(a[0]=s=>W(n)?n.value=s:null),a[1]||(a[1]=s=>e.$emit("search",f(n)))],autofocus:"",density:"compact",variant:"plain",class:"app-bar-search-input",onKeyup:B(h,["esc"]),onKeydown:r},{"prepend-inner":c(()=>[m("div",ue,[l(_,{size:"24",icon:"ri-search-line",style:{"margin-block-start":"1px",opacity:"1"}})])]),"append-inner":c(()=>[m("div",de,[m("div",{class:"text-base text-disabled cursor-pointer me-1",onClick:h}," [esc] "),l(i,{class:"mt-n2",color:"medium-emphasis",onClick:h},{default:c(()=>[l(_,{icon:"ri-close-line"})]),_:1})])]),_:1},8,["modelValue"])]),_:1}),l(te),l(f(J),{options:{wheelPropagation:!1,suppressScrollX:!0},class:"h-100"},{default:c(()=>[S(l(f(ae),{ref_key:"refSearchList",ref:o,density:"compact",class:"app-bar-search-list py-0"},{default:c(()=>[(A(!0),j(X,null,G(u.searchResults,s=>V(e.$slots,"searchResult",{key:s,item:s},()=>[l(f(se),null,{default:c(()=>[Q(L(s),1)]),_:2},1024)],!0)),128))]),_:3},512),[[k,f(n).length&&!!u.searchResults.length]]),S(m("div",fe,[V(e.$slots,"suggestions",{},void 0,!0)],512),[[k,!!u.searchResults&&!f(n)&&e.$slots.suggestions]]),S(m("div",me,[V(e.$slots,"noData",{},()=>[l(P,{class:"h-100"},{default:c(()=>[m("div",pe,[l(_,{size:"64",icon:"ri-file-forbid-line"}),m("div",ve,[a[2]||(a[2]=m("span",null,"No Result For ",-1)),m("span",null,'"'+L(f(n))+'"',1)]),V(e.$slots,"noDataSuggestion",{},void 0,!0)])]),_:3})],!0)],512),[[k,!u.searchResults.length&&f(n).length]])]),_:3})]),_:3})]),_:3},8,["model-value","height","fullscreen"])}}},Be=Y(he,[["__scopeId","data-v-e1433eb7"]]);export{Be as default};
